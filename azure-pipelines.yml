# Disable non-webhook triggers
trigger: none
pr: none

# Webhook resource that triggers pipeline
resources:
  webhooks:
    - webhook: gitwebhook01           ### Webhook name
      connection: githubservice    ### Incoming webhook service connection name

pool:
  vmImage: ubuntu-latest

steps:  
# - script: echo "${{ parameters.WebHook.resource.message.title }}"
- task: Bash@3
  inputs:
    targetType: 'inline'
    script: |
      # Write your commands here
      
      echo 'Hello world'


- task: Bash@3
  inputs:
    targetType: 'inline'
    script: |
      echo "commitid from pr is ${{ parameters.gitwebhook01.commits[0].id }}"
      echo "repositoryname from pr is ${{ parameters.gitwebhook01.repository.name }}"
      echo "targeted branch ${{ parameters.gitwebhook01.ref }}"
      targetCommitId="${{ parameters.gitwebhook01.commits[0].id }}"
      targetRepoName="${{ parameters.gitwebhook01.repository.name }}"
      ref="${{ parameters.gitwebhook01.ref }}"
      targetbranch=$(awk -F'/' '{print $NF}' <<< "$ref")
      echo "$targetbranch"

